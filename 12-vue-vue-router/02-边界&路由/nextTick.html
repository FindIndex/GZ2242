<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- 开发环境版本，包含了有帮助的命令行警告 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router@3.6.5/dist/vue-router.js"></script>
  </head>
  <body>
    <div id="app">
      <p @click="clickHandler" ref="xxx" style="width: 100px; background: red">
        {{msg}}
      </p>

      <ul @click="changeNums">
        <li v-for="n in nums">{{n}}</li>
      </ul>
    </div>

    <script>
      var app = new Vue({
        // 根元素
        el: "#app",
        // 状态
        data: {
          nums: [11, 22, 33],
          msg: "法死千是回血到之，啊孔勇",
        },
        methods: {
          clickHandler: async function () {
            // console.log("前", this.$refs.xxx.offsetHeight);

            this.msg = 1;
            this.msg = "法死千是回血到之，啊孔勇，是五看恶之发，";
            this.msg = 3;
            this.msg =
              "法死千是回血到之，啊孔勇，是五看恶之发，是人联六德极郭更自连秦的言三死重了下，首在心量为，外服宋的气爻落两与本人不，诗弄不有人到病秦不，成掸台仑司负互令反诗娇生，水向快我要病他畴竟土韩事我掉小幕无，至前嗣长上苦即是融上时，与种之羊耐锐，张他愿，姑愿落，于。";

            // console.log(this.$refs.xxx);
            // setTimeout(() => {
            //   console.log("后", this.$refs.xxx.offsetHeight);
            // }, 0);
            // this.$nextTick(function () {
            //   console.log("nextTick", this.$refs.xxx.offsetHeight);
            // });

            await this.$nextTick();

            console.log("nextTick", this.$refs.xxx.offsetHeight);
          },

          changeNums: function () {
            this.nums[1] = 22222;
            // 不能响应的

            // 强制更新 万不得已 救命用
            this.$forceUpdate();

            // Vue.set 返回全新的数组
          },
        },
        watch: {
          msg: function (n) {
            console.log(n);
          },
        },
      });
    </script>
  </body>
</html>
